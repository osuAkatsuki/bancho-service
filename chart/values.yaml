apps:
  - name: bancho-service-api
    environment: production
    codebase: bancho-service
    replicaCount: 1
    container:
      image:
        repository: registry.digitalocean.com/akatsuki/bancho-service
        tag: latest
      port: 80
      env:
        - name: APP_COMPONENT
          value: api
      imagePullSecrets:
        - name: registry-akatsuki
    service:
      type: ClusterIP
      port: 80

  - name: bancho-service-spam-protection-cronjob
    environment: production
    codebase: bancho-service
    replicaCount: 1
    container:
      image:
        repository: registry.digitalocean.com/akatsuki/bancho-service
        tag: latest
      port: 80
      env:
        - name: APP_COMPONENT
          value: reset-all-tokens-spam-rate
      imagePullSecrets:
        - name: registry-akatsuki
    service:
      type: ClusterIP
      port: 80

  - name: bancho-service-inactivity-timeout-cronjob
    environment: production
    codebase: bancho-service
    replicaCount: 1
    container:
      image:
        repository: registry.digitalocean.com/akatsuki/bancho-service
        tag: latest
      port: 80
      env:
        - name: APP_COMPONENT
          value: timeout-inactive-tokens
      imagePullSecrets:
        - name: registry-akatsuki
    service:
      type: ClusterIP
      port: 80

  - name: bancho-service-consume-pubsub-events-daemon
    environment: production
    codebase: bancho-service
    replicaCount: 1
    container:
      image:
        repository: registry.digitalocean.com/akatsuki/bancho-service
        tag: latest
      port: 80
      env:
        - name: APP_COMPONENT
          value: consume-pubsub-events
      imagePullSecrets:
        - name: registry-akatsuki
    service:
      type: ClusterIP
      port: 80
